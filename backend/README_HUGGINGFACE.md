# VisuLex —Å Hugging Face –º–æ–¥–µ–ª—è–º–∏ üöÄ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç Hugging Face –º–æ–¥–µ–ª–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –∏ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üìÑ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞** –∏–∑ PDF, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- **üìù –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è** —Å –ø–æ–º–æ—â—å—é BART –º–æ–¥–µ–ª–∏
- **‚ùì –í–æ–ø—Ä–æ—Å—ã-–æ—Ç–≤–µ—Ç—ã** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- **üîç –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤** –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **üñºÔ∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** (–±–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cd backend
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate     # Windows
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–¥–µ–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –±–æ–ª—å—à–∏–º–∏ (1-3GB). –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ.

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
python -c "import torch; print(f'PyTorch: {torch.__version__}')"
python -c "import transformers; print(f'Transformers: {transformers.__version__}')"
```

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
python run.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:8000`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```bash
python test_api.py
```

## üìä –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏

### 1. –ú–æ–¥–µ–ª—å –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤-–æ—Ç–≤–µ—Ç–æ–≤

- **–ù–∞–∑–≤–∞–Ω–∏–µ:** `deepset/roberta-base-squad2`
- **–†–∞–∑–º–µ—Ä:** ~500MB
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- **–Ø–∑—ã–∫:** –ê–Ω–≥–ª–∏–π—Å–∫–∏–π

### 2. –ú–æ–¥–µ–ª—å –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤

- **–ù–∞–∑–≤–∞–Ω–∏–µ:** `all-MiniLM-L6-v2`
- **–†–∞–∑–º–µ—Ä:** ~90MB
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
- **–†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å:** 384

### 3. –ú–æ–¥–µ–ª—å –¥–ª—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏

- **–ù–∞–∑–≤–∞–Ω–∏–µ:** `facebook/bart-large-cnn`
- **–†–∞–∑–º–µ—Ä:** ~1.6GB
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
- **–Ø–∑—ã–∫:** –ê–Ω–≥–ª–∏–π—Å–∫–∏–π

### 4. –¢–µ–∫—Å—Ç–æ–≤–∞—è –º–æ–¥–µ–ª—å

- **–ù–∞–∑–≤–∞–Ω–∏–µ:** `microsoft/DialoGPT-medium`
- **–†–∞–∑–º–µ—Ä:** ~1.5GB
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –∏ –¥–∏–∞–ª–æ–≥–æ–≤
- **–Ø–∑—ã–∫:** –ê–Ω–≥–ª–∏–π—Å–∫–∏–π

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ `backend`:

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DEBUG=false
LOG_LEVEL=INFO

# Hugging Face –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
HF_CACHE_DIR=./models_cache
HF_OFFLINE=false

# –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
USE_CUDA=true
MODEL_PRECISION=float32

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
MAX_FILE_SIZE=52428800  # 50MB –≤ –±–∞–π—Ç–∞—Ö
MAX_TEXT_LENGTH=10000
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥–µ–ª–µ–π

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.py` –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```python
DEFAULT_QA_MODEL = "your-qa-model"
DEFAULT_EMBEDDING_MODEL = "your-embedding-model"
DEFAULT_SUMMARY_MODEL = "your-summary-model"
```

## üì° API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞

```http
POST /upload
Content-Type: multipart/form-data

file: [binary]
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "doc_id": "uuid",
  "filename": "document.pdf",
  "summary": "–ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ...",
  "text_length": 1500,
  "file_type": "application/pdf"
}
```

### 2. –í–æ–ø—Ä–æ—Å –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç—É

```http
POST /ask
Content-Type: application/json

{
  "doc_id": "uuid",
  "question": "–ß—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ?"
}
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "doc_id": "uuid",
  "question": "–ß—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ?",
  "answer": "–û—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞...",
  "confidence": 0.85,
  "summary": "–ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ..."
}
```

### 3. –ò—Å—Ç–æ—Ä–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

```http
GET /history
```

### 4. –î–µ—Ç–∞–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞

```http
GET /document/{doc_id}
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

```http
GET /health
```

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Python –∫–ª–∏–µ–Ω—Ç

```python
import requests

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
with open("document.pdf", "rb") as f:
    files = {"file": f}
    response = requests.post("http://localhost:8000/upload", files=files)
    doc_data = response.json()
    doc_id = doc_data["doc_id"]

# –í–æ–ø—Ä–æ—Å –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç—É
question_data = {
    "doc_id": doc_id,
    "question": "–ö–∞–∫–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è?"
}
response = requests.post("http://localhost:8000/ask", json=question_data)
answer = response.json()
print(f"–û—Ç–≤–µ—Ç: {answer['answer']}")
```

### cURL

```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
curl -X POST -F "file=@document.pdf" http://localhost:8000/upload

# –í–æ–ø—Ä–æ—Å
curl -X POST -H "Content-Type: application/json" \
  -d '{"doc_id":"uuid","question":"–ß—Ç–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ?"}' \
  http://localhost:8000/ask
```

## üîç –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏

–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å —É—Ä–æ–≤–Ω–µ–º INFO. –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è:

```bash
export LOG_LEVEL=DEBUG
python run.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–µ–π

```bash
curl http://localhost:8000/health
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏

```python
import psutil
import torch

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GPU
if torch.cuda.is_available():
    print(f"GPU –ø–∞–º—è—Ç—å: {torch.cuda.memory_allocated() / 1024**3:.2f} GB")

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM
print(f"RAM: {psutil.virtual_memory().percent}%")
```

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **CPU:** –ú–æ–¥–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ –Ω–∞ CPU
- **GPU:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è NVIDIA GPU —Å 4GB+ –ø–∞–º—è—Ç–∏
- **RAM:** –ú–∏–Ω–∏–º—É–º 8GB, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 16GB+

### –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤

- **–ú–∞–∫—Å–∏–º—É–º:** 50MB (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** PDF –¥–æ 20MB, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ 10MB

### –Ø–∑—ã–∫–∏

- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –ê–Ω–≥–ª–∏–π—Å–∫–∏–π
- **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–µ –º–æ–¥–µ–ª–∏:** –ú–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üöÄ –†–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π

1. –î–æ–±–∞–≤—å—Ç–µ –º–æ–¥–µ–ª—å –≤ `config.py`
2. –°–æ–∑–¥–∞–π—Ç–µ –º–µ—Ç–æ–¥ –≤ `HuggingFaceService`
3. –û–±–Ω–æ–≤–∏—Ç–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

1. –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ `process_document`
2. –û–±–Ω–æ–≤–∏—Ç–µ `SUPPORTED_FILE_TYPES`
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `torch.float16` –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏
- –í–∫–ª—é—á–∏—Ç–µ `torch.compile()` –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è (PyTorch 2.0+)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Hugging Face Transformers](https://huggingface.co/docs/transformers/)
- [PyTorch –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://pytorch.org/docs/)
- [Sentence Transformers](https://www.sbert.net/)
- [FastAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://fastapi.tiangolo.com/)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

---

**–£–¥–∞—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Hugging Face –º–æ–¥–µ–ª–µ–π –≤ VisuLex! üéâ**
